<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FUTUREVILLE - OS</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    
    <style>
        /* --- RESET Y BASES --- */
        * { box-sizing: border-box; user-select: none; cursor: none !important; -webkit-tap-highlight-color: transparent; }
        
        body {
            margin: 0; padding: 0; width: 100vw; height: 100vh;
            overflow: hidden; background-color: #008080;
            font-family: 'VT323', monospace;
        }

        /* --- 1. CURSOR PERSONALIZADO (PC ONLY) --- */
        #cursor-dot {
            position: fixed; top: 0; left: 0;
            width: 6px; height: 6px; background-color: white; border-radius: 50%;
            z-index: 999999; pointer-events: none;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px white, 0 0 20px white;
        }

        #cursor-circle {
            position: fixed; top: 0; left: 0;
            width: 32px; height: 32px; border: 1.5px solid rgba(255, 255, 255, 0.8); border-radius: 50%;
            z-index: 999998; pointer-events: none;
            transform: translate(-50%, -50%); transition: transform 0.1s;
            box-shadow: 0 0 10px rgba(255,255,255,0.3);
        }
        #cursor-circle.click {
            transform: translate(-50%, -50%) scale(0.5);
            background-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 0 20px white;
        }

        /* --- 2. RASTRO DE ESTRELLITAS --- */
        .sparkle {
            position: fixed; pointer-events: none; z-index: 999997;
            width: 12px; height: 12px; background: white;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            box-shadow: 0 0 10px white;
            animation: sparkleAnim 0.8s linear forwards;
        }
        @keyframes sparkleAnim {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(1) rotate(0deg); }
            100% { opacity: 0; transform: translate(-50%, 40px) scale(0) rotate(180deg); }
        }

        /* --- FONDO Y LANDING --- */
        #wallpaper-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -999; pointer-events: none; }
        #bg-video { width: 100%; height: 100%; object-fit: cover; }

        #landing-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 99999; 
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: rgba(0, 0, 0, 0.2); backdrop-filter: blur(15px); transition: opacity 1.5s ease-in-out;
        }
        .fade-out { opacity: 0 !important; pointer-events: none; }
        
        .enter-btn {
            background: transparent; border: 2px solid #fff; padding: 15px 50px;
            font-family: 'VT323', monospace; font-size: 36px; color: white; text-transform: uppercase;
            text-shadow: 0 0 10px rgba(255,255,255,0.5); box-shadow: 0 0 20px rgba(255,255,255,0.2), inset 0 0 20px rgba(255,255,255,0.1);
            transition: all 0.3s ease; 
        }
        .enter-btn:hover { background: rgba(255,255,255,0.1); text-shadow: 0 0 20px rgba(255,255,255,0.8); letter-spacing: 2px; }

        #os-interface { opacity: 0; width: 100%; height: 100%; transition: opacity 2s ease-in-out; position: relative; }
        .os-visible { opacity: 1 !important; }

        /* --- TOP BAR --- */
        #top-bar {
            position: fixed; top: 0; left: 0; width: 100%; height: 42px;
            background-color: rgba(20, 20, 20, 0.95); border-bottom: 1px solid #444;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5); z-index: 5000;
            display: flex; justify-content: space-between; align-items: center; padding: 0 20px;
            color: #888; font-size: 18px; letter-spacing: 2px; pointer-events: none;
        }
        .bar-left, .bar-right { display: flex; align-items: center; gap: 15px; }
        .sep { color: #444; }
        .marquee-container { width: 250px; overflow: hidden; white-space: nowrap; opacity: 0.6; font-size: 14px; color: #aaa; border-left: 1px solid #444; padding-left: 10px; }
        .marquee-content { display: inline-block; animation: scroll 12s linear infinite; }
        @keyframes scroll { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* --- MENU CENTRAL --- */
        #simple-menu {
            position: absolute; top: 75px; left: 50%; transform: translateX(-50%);
            z-index: 50; display: flex; flex-direction: column; align-items: center; 
            cursor: pointer;
        }
        .menu-link {
            font-size: 42px; color: rgba(255, 255, 255, 0.7); text-decoration: none; 
            transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1); line-height: 1; letter-spacing: 2px; position: relative;
        }
        #simple-menu:hover .menu-link { color: white; text-shadow: 0 0 20px white, 0 0 40px rgba(255, 255, 255, 0.5); letter-spacing: 6px; transform: scale(1.05); }
        .aesthetic-line { width: 0%; height: 2px; margin-top: 5px; background: linear-gradient(90deg, transparent 0%, #ffffff 50%, transparent 100%); box-shadow: 0 0 15px #ffffff; transition: width 0.4s ease; opacity: 0.5; }
        #simple-menu:hover .aesthetic-line { width: 160%; opacity: 1; }

        /* --- BARRA DERECHA (WIDGETS) --- */
        #right-sidebar {
            position: absolute; top: 75px; right: 40px; width: 160px;
            display: flex; flex-direction: column; align-items: flex-end; gap: 15px;
            z-index: 6000; pointer-events: none; 
        }
        #volume-widget { display: flex; align-items: center; justify-content: flex-end; gap: 10px; pointer-events: auto; }
        .vol-icon { width: 28px; height: 28px; image-rendering: pixelated; filter: drop-shadow(0 0 5px rgba(255,255,255,0.5)); transition: transform 0.1s; }
        .vol-icon:active { transform: scale(0.9); }
        .vol-slider-container { width: 0px; overflow: hidden; opacity: 0; transition: all 0.4s ease; display: flex; align-items: center; margin-right: 5px; }
        #volume-widget:hover .vol-slider-container { width: 110px; opacity: 1; }
        input[type=range] { -webkit-appearance: none; width: 100px; background: transparent; }
        input[type=range]:focus { outline: none; }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; background: rgba(255,255,255,0.3); border: 1px solid rgba(255,255,255,0.5); }
        input[type=range]::-webkit-slider-thumb { height: 12px; width: 12px; background: #fff; -webkit-appearance: none; margin-top: -5px; box-shadow: 0 0 5px #fff; }

        #aesthetic-widget { width: 140px; height: 160px; border: 1px solid rgba(255, 255, 255, 0.2); background: rgba(0,0,0,0.3); display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 0 10px rgba(0,0,0,0.5); backdrop-filter: blur(2px); }
        .widget-header { font-size: 12px; color: #aaa; margin-bottom: 10px; letter-spacing: 2px; }
        .radar-circle { width: 70px; height: 70px; border: 1px dashed rgba(255, 255, 255, 0.3); border-radius: 50%; position: relative; animation: spin 15s linear infinite; }
        .radar-core { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 6px; height: 6px; background: #fff; border-radius: 50%; box-shadow: 0 0 10px #fff; }
        .radar-dot { position: absolute; top: -4px; left: 50%; width: 4px; height: 4px; background: #ccc; border-radius: 50%; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        #sys-monitor { width: 140px; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.2); background: rgba(0,0,0,0.5); font-size: 12px; color: #ddd; display: flex; flex-direction: column; gap: 8px; backdrop-filter: blur(2px); }
        .sys-row { display: flex; justify-content: space-between; align-items: center; }
        .sys-bar-bg { width: 60px; height: 6px; background: #333; border: 1px solid #555; }
        .sys-bar-fill { height: 100%; background: #00ffff; width: 50%; animation: fluctuate 2s infinite ease-in-out; }
        .sys-bar-fill.ram { animation-duration: 4s; background: #ff00ff; }
        @keyframes fluctuate { 0% { width: 40%; } 50% { width: 80%; } 100% { width: 40%; } }

        #log-terminal { width: 140px; height: 100px; background: rgba(0, 0, 0, 0.8); border: 1px solid #444; color: #0f0; font-size: 10px; font-family: monospace; padding: 5px; overflow: hidden; display: flex; flex-direction: column; justify-content: flex-end; }
        .cyan-text { color: #00ffff; }

        /* --- GRID ORDENADO PC (COLUMNAS) --- */
        #selection-box { position: absolute; border: 1px dotted #fff; background-color: rgba(0, 0, 128, 0.4); display: none; z-index: 5; pointer-events: none; }
        
        #desktop-icons { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; 
            display: grid; 
            grid-template-columns: 100px 100px; 
            grid-template-rows: repeat(5, 110px);
            gap: 10px; 
            padding: 75px 30px 30px 30px; 
            pointer-events: none; 
        }
        
        .icon { 
            display: flex; flex-direction: column; align-items: center; text-align: center; 
            filter: drop-shadow(2px 2px 0px rgba(0,0,0,0.5)); 
            width: 100px; 
            pointer-events: auto; 
            align-self: start; justify-self: center;
        }
        .icon:hover { opacity: 0.9; transform: translateY(1px); }
        .icon img { width: 48px; height: 48px; margin-bottom: 4px; image-rendering: pixelated; }
        .icon-text { color: white; font-size: 18px; line-height: 1.1; padding: 3px 4px; text-shadow: 1px 1px #000; white-space: nowrap; border: 1px dotted transparent; }
        .icon:hover .icon-text { background-color: #000080; border: 1px dotted #ffff00; }

        /* --- VENTANAS --- */
        .window { display: none; position: absolute; background-color: #c0c0c0; border: 2px solid #dfdfdf; border-right-color: #000; border-bottom-color: #000; box-shadow: 2px 2px 0px rgba(0,0,0,0.5); flex-direction: column; font-family: 'Arial', sans-serif; color: black; z-index: 100; }
        #win-mipc { width: 450px; height: 320px; top: 100px; left: 200px; }
        #win-releases { width: 480px; height: 350px; top: 150px; left: 250px; }
        #win-recycle { width: 400px; height: 200px; top: 300px; left: 400px; }
        #win-merch { width: 800px; height: 500px; top: 10%; left: 15%; }
        #win-contact { width: 500px; height: 600px; top: 15%; left: 35%; }
        #win-discord { width: 400px; height: 300px; top: 300px; left: 300px; }
        #win-email { width: 450px; height: 350px; top: 100px; left: 100px; }
        .title-bar { background-color: #000080; padding: 4px 6px; display: flex; justify-content: space-between; align-items: center; color: white; font-weight: bold; font-size: 14px; cursor: default; }
        .title-content { display: flex; align-items: center; gap: 8px; pointer-events: none; }
        .win-controls { display: flex; gap: 3px; }
        .btn-win { width: 18px; height: 16px; background: #c0c0c0; border: 1px solid #fff; border-right-color: #000; border-bottom-color: #000; font-size: 10px; display: flex; justify-content: center; align-items: center; color: black; }
        .btn-win:active { border: 1px solid #000; border-right-color: #fff; border-bottom-color: #fff; transform: translate(1px,1px); }
        .menu-bar { display: flex; gap: 15px; padding: 4px 8px; font-size: 13px; border-bottom: 1px solid #808080; margin-bottom: 2px; }
        .menu-item:hover { background: #000080; color: white; }
        .window-content { flex-grow: 1; background: white; border: 2px solid #808080; border-right-color: #fff; border-bottom-color: #fff; margin: 5px; padding: 15px; overflow: auto; position: relative; }
        .bio-trigger, .file, .menu-link { cursor: pointer; } 
        .bio-text { margin-top: 15px; font-size: 14px; line-height: 1.5; display: none; font-family: 'Verdana'; }
        .file-grid { display: flex; gap: 20px; flex-wrap: wrap; }
        .file { display: flex; flex-direction: column; align-items: center; width: 90px; text-align: center; text-decoration: none; color: black; }
        .file:hover .file-img { opacity: 0.8; }
        .file:hover .file-name { background: #000080; color: white; border: 1px dotted yellow; }
        .file-img { width: 40px; height: 40px; image-rendering: pixelated; margin-bottom: 5px; }
        .file-name { font-size: 12px; padding: 3px; word-wrap: break-word; }
        .merch-frame { width: 100%; height: 100%; border: none; background: white; }
        .recycle-msg { font-family: 'Arial', sans-serif; font-size: 16px; text-align: center; margin-top: 40px; }
        .recycle-msg strong { color: red; }

        /* --- BARRA DE TAREAS --- */
        #taskbar { position: fixed; bottom: 0; left: 0; width: 100%; height: 42px; background-color: #242424; border-top: 2px solid #666; z-index: 9999; display: flex; align-items: center; padding: 3px; box-shadow: 0 -1px 0 #000 inset; cursor: default; }
        #start-btn { display: flex; align-items: center; gap: 6px; background: #333; border: 2px solid #666; border-right-color: #000; border-bottom-color: #000; padding: 4px 8px; font-weight: bold; font-size: 18px; box-shadow: 1px 1px 0 #000; margin-right: 8px; color: white; }
        #start-btn:active { border: 2px solid #000; border-right-color: #666; border-bottom-color: #666; transform: translate(1px,1px); box-shadow: none; background: #1a1a1a; }
        .divider { width: 2px; height: 70%; background: #444; border-right: 1px solid #000; margin-right: 6px; margin-left: 2px; }
        #tasks-area { display: flex; gap: 4px; flex-grow: 1; }
        .task-tab { width: 140px; height: 28px; background: #333; border: 2px solid #666; border-right-color: #000; border-bottom-color: #000; display: flex; align-items: center; padding-left: 6px; gap: 6px; font-size: 12px; font-family: sans-serif; color: #ddd; }
        .task-tab.active { background: #1a1a1a; border: 2px solid #000; border-right-color: #666; border-bottom-color: #666; font-weight: bold; color: white; background-image: radial-gradient(#555 10%, transparent 10%); background-size: 3px 3px; }
        .tray { margin-left: auto; border: 2px solid #666; border-right-color: #000; border-bottom-color: #000; background: #333; padding: 3px 10px; font-size: 16px; color: white; }

        /* =========================================
           MOBILE RESPONSIVE (M√ìVILES)
           ========================================= */
        @media (max-width: 768px) {
            /* 1. Cursor Normal (Touch) */
            * { cursor: auto !important; }
            #cursor-dot, #cursor-circle, .cursor-trail, .sparkle { display: none !important; }

            /* 2. Ocultar Barra Lateral Derecha */
            #right-sidebar { display: none !important; }

            /* 3. Ajustar Top Bar */
            #top-bar { padding: 0 10px; font-size: 14px; }
            .marquee-container { width: 120px; }
            
            /* 4. Grid de Iconos Fluido (3 Columnas) */
            #desktop-icons {
                grid-template-columns: repeat(3, 1fr);
                grid-template-rows: auto;
                grid-auto-flow: row; /* Rellenar normal en m√≥vil */
                padding-top: 130px; /* Dejar sitio al men√∫ que baja */
                gap: 5px;
            }
            .icon { width: auto; transform: scale(0.9); }

            /* 5. Men√∫ "Contact Me" m√°s peque√±o */
            #simple-menu { top: 60px; }
            .menu-link { font-size: 32px; }

            /* 6. Ventanas Centradas y Maximizadas */
            .window {
                width: 90% !important;
                height: auto !important;
                max-height: 80vh;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
            }
            
            /* Ocultar barra tareas tareas (muy peque√±a) o simplificar */
            .task-tab { width: 40px; overflow: hidden; }
        }

    </style>
</head>
<body>

    <div id="cursor-dot"></div>
    <div id="cursor-circle"></div>

    <audio id="bg-music" loop><source src="sounds/song.wav" type="audio/wav"></audio>
    <audio id="click-sound"><source src="sounds/click.wav" type="audio/wav"></audio>

    <div id="wallpaper-container">
        <video id="bg-video" autoplay muted loop playsinline>
            <source src="bg videos/bg.mp4" type="video/mp4">
        </video>
    </div>

    <div id="landing-screen">
        <button class="enter-btn" onclick="startSystem()">ENTER SPACE</button>
    </div>

    <div id="os-interface">
        
        <div id="top-bar">
            <div class="bar-left">
                FUTUREVILLE_OS <span class="sep">|</span> v1.0.4 <span class="sep">|</span>
                <div class="marquee-container">
                    <div class="marquee-content">SCANNING SECTORS... AUDIO: OK... VIDEO: OK... SYSTEM: STABLE... CONNECTING TO FUTURE...</div>
                </div>
            </div>
            <div class="bar-right">
                <span>LIVE</span>
                <span class="sep">|</span>
                <span>UPTIME: 99.9%</span>
                <span class="sep">|</span>
                <span>SYSTEM: ONLINE</span>
                <span class="sep">|</span>
                <span>MEM: 64MB</span>
            </div>
        </div>

        <div id="right-sidebar">
            <div id="volume-widget">
                <div class="vol-slider-container">
                    <input type="range" id="vol-control" min="0" max="1" step="0.1" value="0.5">
                </div>
                <img id="vol-icon-img" src="material/bocina.png" class="vol-icon" onclick="toggleMute()">
            </div>
            <div id="aesthetic-widget">
                <div class="widget-header">ORBITAL_SYS</div>
                <div class="radar-circle"><div class="radar-core"></div><div class="radar-dot"></div></div>
                <div style="font-size:10px; margin-top:10px; color:#aaa;">TARGET: LOCKED</div>
            </div>
            <div id="sys-monitor">
                <div class="sys-row"><span>CPU</span><div class="sys-bar-bg"><div class="sys-bar-fill"></div></div></div>
                <div class="sys-row"><span>RAM</span><div class="sys-bar-bg"><div class="sys-bar-fill ram"></div></div></div>
                <div class="sys-row" style="justify-content:center; margin-top:5px; color:#00ffff">TEMP: 45¬∞C</div>
            </div>
            <div id="log-terminal">
                <div>> INIT SEQ...</div><div>> CONNECTING...</div><div class="cyan-text">> ACCESS OK</div>
            </div>
        </div>

        <div id="simple-menu" onclick="openWin('win-contact', 'contact me', 'https://win98icons.alexmeub.com/icons/png/world-4.png')">
            <span class="menu-link">contact me</span>
            <div class="aesthetic-line"></div>
        </div>

        <div id="selection-box"></div>

        <div id="desktop-icons">
            
            <div class="icon" style="grid-column: 1; grid-row: 1;" onclick="openWin('win-recycle', 'Recycle Bin', 'https://win98icons.alexmeub.com/icons/png/recycle_bin_empty-4.png')">
                <img src="https://win98icons.alexmeub.com/icons/png/recycle_bin_empty-4.png"><div class="icon-text">Recycle Bin</div>
            </div>
            <div class="icon" style="grid-column: 1; grid-row: 2;" onclick="openWin('win-merch', 'Official Merch', 'https://win98icons.alexmeub.com/icons/png/directory_open_file_mydocs-4.png')">
                <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png"><div class="icon-text">Merch</div>
            </div>
            <div class="icon" style="grid-column: 1; grid-row: 3;" onclick="openWin('win-releases', 'Releases', 'https://win98icons.alexmeub.com/icons/png/directory_open_file_mydocs-4.png')">
                <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png"><div class="icon-text">Releases</div>
            </div>
            <div class="icon" style="grid-column: 1; grid-row: 4;" onclick="openWin('win-mipc', 'Mi PC', 'https://win98icons.alexmeub.com/icons/png/computer_explorer-4.png')">
                <img src="https://win98icons.alexmeub.com/icons/png/computer_explorer-4.png"><div class="icon-text">Mi PC</div>
            </div>
            <div class="icon" style="grid-column: 1; grid-row: 5;" onclick="openWin('win-discord', 'Discord', 'logos/discord.png')">
                <img src="logos/discord.png"><div class="icon-text">Discord</div>
            </div>

            <div class="icon" style="grid-column: 2; grid-row: 1;" onclick="window.open('https://open.spotify.com/intl-es/artist/5YYDG8J9TC7S9FHyy9qgSE?si=eCi0i7u2QQO0FD1OOe9ubg', '_blank')">
                <img src="logos/spotify.png"><div class="icon-text">Spotify</div>
            </div>
            <div class="icon" style="grid-column: 2; grid-row: 2;" onclick="window.open('https://www.instagram.com/_.futureville._/', '_blank')">
                <img src="logos/instagram.png"><div class="icon-text">Instagram.exe</div>
            </div>
            <div class="icon" style="grid-column: 2; grid-row: 3;" onclick="openWin('win-email', 'E-mail', 'logos/email.png')">
                <img src="logos/email.png"><div class="icon-text">E-mail</div>
            </div>

        </div>

        <div id="win-recycle" class="window" onmousedown="bringToFront(this)"><div class="title-bar" id="header-recycle"><div class="title-content"><img src="https://win98icons.alexmeub.com/icons/png/recycle_bin_empty-4.png" width="16"> Recycle Bin</div><div class="win-controls"><div class="btn-win" onclick="minWin('win-recycle')">_</div><div class="btn-win">‚ñ°</div><div class="btn-win" onclick="closeWin('win-recycle')">X</div></div></div><div class="window-content"><div class="recycle-msg"><p>what are you doing here?</p><p><strong>GO STREAM MY MUSIC.</strong></p></div></div></div>
        <div id="win-merch" class="window" onmousedown="bringToFront(this)"><div class="title-bar" id="header-merch"><div class="title-content"><img src="https://win98icons.alexmeub.com/icons/png/world-4.png" width="16"> Internet Explorer - Futureville Merch</div><div class="win-controls"><div class="btn-win" onclick="minWin('win-merch')">_</div><div class="btn-win">‚ñ°</div><div class="btn-win" onclick="closeWin('win-merch')">X</div></div></div><div class="menu-bar" style="background:white; border:1px inset #ccc;">Address: <span style="color:#444">http://www.futureville.com/shop</span></div><div class="window-content" style="padding:0; overflow:hidden;"><iframe src="https://www.wikipedia.org" class="merch-frame"></iframe></div></div>
        <div id="win-mipc" class="window" onmousedown="bringToFront(this)"><div class="title-bar" id="header-mipc"><div class="title-content"><img src="https://win98icons.alexmeub.com/icons/png/computer_explorer-4.png" width="16"> Mi PC - Futureville</div><div class="win-controls"><div class="btn-win" onclick="minWin('win-mipc')">_</div><div class="btn-win">‚ñ°</div><div class="btn-win" onclick="closeWin('win-mipc')">X</div></div></div><div class="menu-bar"><div class="menu-item">File</div><div class="menu-item">Edit</div><div class="menu-item">View</div></div><div class="window-content"><div onclick="toggleBio()" class="bio-trigger">üìÑ LEER_BIOGRAFIA.TXT</div><div id="bio-text" class="bio-text"><p><strong>ARTISTA:</strong> Futureville</p><p><strong>ORIGEN:</strong> 1999</p><p>M√∫sica para plantas digitales.</p></div></div></div>
        <div id="win-releases" class="window" onmousedown="bringToFront(this)"><div class="title-bar" id="header-releases"><div class="title-content"><img src="https://win98icons.alexmeub.com/icons/png/directory_open_file_mydocs-4.png" width="16"> C:\Futureville\Releases</div><div class="win-controls"><div class="btn-win" onclick="minWin('win-releases')">_</div><div class="btn-win">‚ñ°</div><div class="btn-win" onclick="closeWin('win-releases')">X</div></div></div><div class="menu-bar"><div class="menu-item">File</div><div class="menu-item">Edit</div><div class="menu-item">View</div></div><div class="window-content"><div class="file-grid"><a href="https://share.amuse.io/track/futureville-burial" target="_blank" class="file"><img src="https://win98icons.alexmeub.com/icons/png/cd_audio_cd_a-4.png" class="file-img"><div class="file-name">FutureVille - burial.msc</div></a></div></div></div>
        <div id="win-contact" class="window" onmousedown="bringToFront(this)"><div class="title-bar" id="header-contact"><div class="title-content"><img src="https://win98icons.alexmeub.com/icons/png/world-4.png" width="16"> contact me</div><div class="win-controls"><div class="btn-win" onclick="minWin('win-contact')">_</div><div class="btn-win">‚ñ°</div><div class="btn-win" onclick="closeWin('win-contact')">X</div></div></div><div class="menu-bar" style="background:white; border:1px inset #ccc;">Address: <span style="color:#444">https://fanlink.tv/vUjb</span></div><div class="window-content" style="padding:0; overflow:hidden;"><iframe src="https://fanlink.tv/vUjb" class="merch-frame"></iframe></div></div>
        <div id="win-discord" class="window" onmousedown="bringToFront(this)"><div class="title-bar" id="header-discord"><div class="title-content"><img src="logos/discord.png" width="16"> Discord Server</div><div class="win-controls"><div class="btn-win" onclick="minWin('win-discord')">_</div><div class="btn-win">‚ñ°</div><div class="btn-win" onclick="closeWin('win-discord')">X</div></div></div><div class="window-content"><p>Join the server.</p></div></div>
        <div id="win-email" class="window" onmousedown="bringToFront(this)"><div class="title-bar" id="header-email"><div class="title-content"><img src="logos/email.png" width="16"> Compose New Email</div><div class="win-controls"><div class="btn-win" onclick="minWin('win-email')">_</div><div class="btn-win">‚ñ°</div><div class="btn-win" onclick="closeWin('win-email')">X</div></div></div><div class="window-content"><p>contact me at futurevillecontact@gmail.com</p></div></div>

        <div id="taskbar">
            <div id="start-btn"><img src="https://win98icons.alexmeub.com/icons/png/windows-0.png" width="22"> Start</div>
            <div class="divider"></div><div id="tasks-area"></div><div class="tray" id="clock">12:00 PM</div>
        </div>
    </div>

    <script>
        // CURSOR
        const cursorDot = document.getElementById('cursor-dot');
        const cursorCircle = document.getElementById('cursor-circle');
        let mouseX = 0, mouseY = 0; let cursorX = 0, cursorY = 0;
        let lastSparkleX = 0; let lastSparkleY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX; mouseY = e.clientY;
            cursorDot.style.left = mouseX + 'px'; cursorDot.style.top = mouseY + 'px';
            const dist = Math.hypot(e.clientX - lastSparkleX, e.clientY - lastSparkleY);
            if (dist > 10) { 
                createSparkle(e.clientX, e.clientY);
                lastSparkleX = e.clientX; lastSparkleY = e.clientY;
            }
        });

        function createSparkle(x, y) {
            const sparkle = document.createElement('div'); sparkle.className = 'sparkle';
            sparkle.style.left = x + 'px'; sparkle.style.top = y + 'px';
            sparkle.style.marginLeft = (Math.random() - 0.5) * 15 + 'px';
            document.body.appendChild(sparkle);
            setTimeout(() => { sparkle.remove(); }, 800); 
        }

        function animateCursor() {
            cursorX += (mouseX - cursorX) * 0.15; cursorY += (mouseY - cursorY) * 0.15;
            cursorCircle.style.left = cursorX + 'px'; cursorCircle.style.top = cursorY + 'px';
            requestAnimationFrame(animateCursor);
        }
        animateCursor();

        document.addEventListener('mousedown', () => cursorCircle.classList.add('click'));
        document.addEventListener('mouseup', () => cursorCircle.classList.remove('click'));

        // AUDIO
        const volSlider = document.getElementById('vol-control');
        const bgMusic = document.getElementById('bg-music');
        const clickSound = document.getElementById('click-sound');
        const volIcon = document.getElementById('vol-icon-img');
        let isMuted = false;
        
        bgMusic.volume = 0.5; clickSound.volume = 0.5;

        function toggleMute() {
            isMuted = !isMuted;
            if (isMuted) { bgMusic.muted = true; clickSound.muted = true; volIcon.style.opacity = "0.5"; } 
            else { bgMusic.muted = false; clickSound.muted = false; volIcon.style.opacity = "1"; }
        }

        volSlider.addEventListener('input', (e) => {
            const val = e.target.value; bgMusic.volume = val; clickSound.volume = val;
            if (isMuted && val > 0) toggleMute();
        });

        document.addEventListener('mousedown', () => { if (!isMuted) { clickSound.currentTime = 0; clickSound.play().catch(e => {}); } });

        // SYSTEM
        function startSystem() {
            bgMusic.play().catch(e => console.log("Error audio:", e));
            const landing = document.getElementById('landing-screen');
            landing.classList.add('fade-out');
            setTimeout(() => { document.getElementById('os-interface').classList.add('os-visible'); }, 200);
            setTimeout(() => { landing.style.display = 'none'; }, 1600);
        }

        setInterval(() => {
            const d = new Date();
            let h = d.getHours(), m = d.getMinutes(), amp = h >= 12 ? 'PM' : 'AM';
            h = h % 12 || 12; document.getElementById('clock').textContent = `${h}:${String(m).padStart(2,'0')} ${amp}`;
        }, 1000);

        const selectionBox = document.getElementById('selection-box');
        let isSelecting = false; let startX, startY;
        let isDragging = false; let currentWindow = null; let offset = { x: 0, y: 0 }; let zIndexCounter = 100;

        document.addEventListener('mousedown', (e) => {
            if(!document.getElementById('os-interface').classList.contains('os-visible')) return;
            const isClickable = e.target.closest('.icon') || e.target.closest('.window') || e.target.closest('#taskbar') || e.target.closest('#landing-screen') || e.target.closest('#simple-menu') || e.target.closest('#volume-widget') || e.target.closest('.sparkle');
            if (!isClickable) {
                isSelecting = true; startX = e.clientX; startY = e.clientY;
                selectionBox.style.left = startX + 'px'; selectionBox.style.top = startY + 'px';
                selectionBox.style.width = '0px'; selectionBox.style.height = '0px'; selectionBox.style.display = 'block';
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (isSelecting) {
                const w = Math.abs(e.clientX - startX); const h = Math.abs(e.clientY - startY);
                selectionBox.style.width = w + 'px'; selectionBox.style.height = h + 'px';
                selectionBox.style.left = Math.min(e.clientX, startX) + 'px'; selectionBox.style.top = Math.min(e.clientY, startY) + 'px';
            }
            if (isDragging && currentWindow) {
                e.preventDefault(); 
                currentWindow.style.left = (e.clientX - offset.x) + 'px'; 
                currentWindow.style.top = (e.clientY - offset.y) + 'px';
            }
        });

        document.addEventListener('mouseup', () => { isSelecting = false; selectionBox.style.display = 'none'; isDragging = false; currentWindow = null; });

        function bringToFront(element) { zIndexCounter++; element.style.zIndex = zIndexCounter; }
        function startDrag(e, windowId) {
            if(e.target.classList.contains('btn-win')) return;
            isDragging = true; currentWindow = document.getElementById(windowId);
            bringToFront(currentWindow);
            offset.x = e.clientX - currentWindow.offsetLeft; offset.y = e.clientY - currentWindow.offsetTop;
        }

        document.getElementById('header-mipc').addEventListener('mousedown', (e) => startDrag(e, 'win-mipc'));
        document.getElementById('header-releases').addEventListener('mousedown', (e) => startDrag(e, 'win-releases'));
        document.getElementById('header-recycle').addEventListener('mousedown', (e) => startDrag(e, 'win-recycle'));
        document.getElementById('header-merch').addEventListener('mousedown', (e) => startDrag(e, 'win-merch'));
        document.getElementById('header-contact').addEventListener('mousedown', (e) => startDrag(e, 'win-contact'));
        document.getElementById('header-discord').addEventListener('mousedown', (e) => startDrag(e, 'win-discord'));
        document.getElementById('header-email').addEventListener('mousedown', (e) => startDrag(e, 'win-email'));

        const state = { 'win-mipc': { min: false }, 'win-releases': { min: false }, 'win-recycle': { min: false }, 'win-merch': { min: false }, 'win-contact': { min: false }, 'win-discord': { min: false }, 'win-email': { min: false } };

        function openWin(id, title, icon) {
            const el = document.getElementById(id);
            el.style.display = 'flex'; bringToFront(el); state[id].min = false;
            // Solo a√±adir a barra de tareas si no existe ya
            if (!document.getElementById('task-' + id)) {
                const btn = document.createElement('div'); btn.id = 'task-' + id; btn.className = 'task-tab active';
                btn.innerHTML = `<img src="${icon}" width="16"> ${title}`;
                btn.onclick = () => toggleWin(id);
                document.getElementById('tasks-area').appendChild(btn);
            } else { document.getElementById('task-' + id).classList.add('active'); }
            
            // En m√≥vil, asegurar que al abrir se centre aunque se haya movido antes
            if (window.innerWidth <= 768) {
                el.style.top = "50%"; el.style.left = "50%"; el.style.transform = "translate(-50%, -50%)";
            }
        }

        function closeWin(id) { document.getElementById(id).style.display = 'none'; const btn = document.getElementById('task-' + id); if(btn) btn.remove(); }
        function minWin(id) { document.getElementById(id).style.display = 'none'; state[id].min = true; document.getElementById('task-' + id).classList.remove('active'); }
        function toggleWin(id) {
            const el = document.getElementById(id);
            if (state[id].min || el.style.display === 'none') { el.style.display = 'flex'; bringToFront(el); state[id].min = false; document.getElementById('task-' + id).classList.add('active'); } else { minWin(id); }
        }
        function toggleBio() { const bio = document.getElementById('bio-text'); bio.style.display = bio.style.display === 'block' ? 'none' : 'block'; }
    </script>
</body>
</html>
